# CultureBridge 测试用例文档

## 概述

本文档包含CultureBridge平台的测试用例，涵盖了所有核心功能模块。这些测试用例旨在确保平台的稳定性、安全性和用户体验。测试团队和开发人员应使用本文档作为测试基准，确保所有功能按预期工作。

## 测试环境

### 测试网络
- 以太坊测试网络 (Goerli)
- Polygon测试网络 (Mumbai)

### 浏览器兼容性测试
- Chrome (最新版)
- Firefox (最新版)
- Safari (最新版)
- Edge (最新版)
- 移动浏览器 (iOS Safari, Android Chrome)

### 设备兼容性测试
- 桌面 (Windows, macOS, Linux)
- 平板 (iPad, Android平板)
- 手机 (iPhone, Android手机)

## 1. 钱包连接测试

### TC-1.1: 钱包连接 - 基本功能

**前置条件**:
- 用户已安装MetaMask钱包
- 用户未连接钱包

**测试步骤**:
1. 访问CultureBridge首页
2. 点击"连接钱包"按钮
3. 在弹出的钱包选择对话框中选择"MetaMask"
4. 在MetaMask弹窗中确认连接请求

**预期结果**:
- 钱包成功连接
- 页面右上角显示用户钱包地址的简短版本
- 用户能够访问需要钱包连接的功能

### TC-1.2: 钱包连接 - 未安装钱包

**前置条件**:
- 用户未安装MetaMask或其他支持的钱包

**测试步骤**:
1. 访问CultureBridge首页
2. 点击"连接钱包"按钮

**预期结果**:
- 显示提示信息，建议用户安装钱包
- 提供钱包安装链接
- 用户无法继续连接钱包流程

### TC-1.3: 钱包连接 - 网络切换

**前置条件**:
- 用户已连接MetaMask钱包
- 当前连接到不支持的网络

**测试步骤**:
1. 点击页面上的网络切换提示
2. 在弹出的网络选择对话框中选择"Polygon Mumbai"
3. 在MetaMask弹窗中确认网络切换请求

**预期结果**:
- 钱包成功切换到Polygon Mumbai网络
- 页面更新显示当前网络信息
- 用户能够访问该网络上的功能和资产

### TC-1.4: 钱包连接 - 断开连接

**前置条件**:
- 用户已连接MetaMask钱包

**测试步骤**:
1. 点击右上角的钱包地址
2. 在下拉菜单中选择"断开连接"

**预期结果**:
- 钱包成功断开连接
- 页面右上角显示"连接钱包"按钮
- 用户无法访问需要钱包连接的功能

### TC-1.5: 钱包连接 - 账户切换

**前置条件**:
- 用户已连接MetaMask钱包
- MetaMask中有多个账户

**测试步骤**:
1. 在MetaMask中切换到另一个账户

**预期结果**:
- 平台检测到账户变更
- 页面更新显示新的钱包地址
- 用户能够访问新账户的资产和功能

## 2. NFT市场测试

### TC-2.1: NFT市场 - 浏览NFT

**前置条件**:
- 用户已连接钱包
- NFT市场中有多个NFT列表

**测试步骤**:
1. 导航到"NFT市场"页面
2. 滚动浏览NFT列表
3. 使用筛选器按类别筛选NFT
4. 使用搜索框搜索特定NFT

**预期结果**:
- NFT列表正确加载并显示
- 筛选功能正常工作，显示符合条件的NFT
- 搜索功能正常工作，显示符合搜索词的NFT
- NFT卡片显示正确的图片、名称和价格

### TC-2.2: NFT市场 - 查看NFT详情

**前置条件**:
- 用户已连接钱包
- NFT市场中有可查看的NFT

**测试步骤**:
1. 导航到"NFT市场"页面
2. 点击任意NFT卡片
3. 查看NFT详情页面

**预期结果**:
- NFT详情页面正确加载
- 显示NFT的高清图片/视频
- 显示NFT的详细信息（名称、描述、创建者、所有者等）
- 显示NFT的价格和交易历史
- 显示购买/出价按钮（如果NFT在售）

### TC-2.3: NFT市场 - 购买固定价格NFT

**前置条件**:
- 用户已连接钱包
- 用户钱包中有足够的ETH/MATIC
- NFT市场中有固定价格出售的NFT

**测试步骤**:
1. 导航到NFT详情页面
2. 点击"购买"按钮
3. 在确认对话框中检查交易详情
4. 点击"确认购买"
5. 在MetaMask中确认交易

**预期结果**:
- 交易成功提交到区块链
- 显示交易处理中的状态指示
- 交易确认后，NFT所有权转移给用户
- NFT显示在用户的收藏中
- 交易历史更新

### TC-2.4: NFT市场 - 参与NFT拍卖

**前置条件**:
- 用户已连接钱包
- 用户钱包中有足够的ETH/MATIC
- NFT市场中有拍卖中的NFT

**测试步骤**:
1. 导航到拍卖中的NFT详情页面
2. 点击"出价"按钮
3. 输入高于当前最高出价的金额
4. 点击"提交出价"
5. 在MetaMask中确认交易

**预期结果**:
- 出价成功提交到区块链
- 用户成为当前最高出价者
- 出价历史更新
- 如果是最终最高出价者，拍卖结束后NFT所有权转移给用户

### TC-2.5: NFT市场 - 创建NFT

**前置条件**:
- 用户已连接钱包
- 用户钱包中有足够的ETH/MATIC支付Gas费

**测试步骤**:
1. 导航到"NFT市场"页面
2. 点击"创建NFT"按钮
3. 上传数字作品文件
4. 填写NFT详细信息（标题、描述、类别等）
5. 设置版税比例
6. 点击"创建"按钮
7. 在MetaMask中确认交易

**预期结果**:
- NFT成功铸造并记录在区块链上
- 显示铸造成功的确认信息
- NFT显示在用户的收藏中
- 用户可以选择将NFT上架销售

### TC-2.6: NFT市场 - 上架NFT销售

**前置条件**:
- 用户已连接钱包
- 用户拥有至少一个NFT
- 用户钱包中有足够的ETH/MATIC支付Gas费

**测试步骤**:
1. 导航到"我的收藏"页面
2. 选择要出售的NFT
3. 点击"出售"按钮
4. 选择销售类型（固定价格）
5. 设置价格
6. 点击"上架"按钮
7. 在MetaMask中确认交易

**预期结果**:
- NFT成功上架销售
- NFT在市场中显示为待售状态
- 显示上架成功的确认信息
- 其他用户可以看到并购买该NFT

## 3. DAO治理测试

### TC-3.1: DAO治理 - 查看提案列表

**前置条件**:
- 用户已连接钱包
- DAO中有多个提案

**测试步骤**:
1. 导航到"DAO治理"页面
2. 浏览提案列表
3. 使用筛选器按状态筛选提案

**预期结果**:
- 提案列表正确加载并显示
- 每个提案卡片显示标题、摘要、状态和投票进度
- 筛选功能正常工作，显示符合条件的提案

### TC-3.2: DAO治理 - 查看提案详情

**前置条件**:
- 用户已连接钱包
- DAO中有可查看的提案

**测试步骤**:
1. 导航到"DAO治理"页面
2. 点击任意提案卡片
3. 查看提案详情页面

**预期结果**:
- 提案详情页面正确加载
- 显示提案的完整信息（标题、描述、创建者、创建时间等）
- 显示当前投票结果和进度
- 显示投票按钮（如果提案在投票期内）
- 显示提案状态和时间线

### TC-3.3: DAO治理 - 创建提案

**前置条件**:
- 用户已连接钱包
- 用户持有足够的治理代币
- 用户达到最低声誉分数要求

**测试步骤**:
1. 导航到"DAO治理"页面
2. 点击"创建提案"按钮
3. 选择提案类型（文本提案）
4. 填写提案详情（标题、摘要、描述等）
5. 设置投票选项和投票期限
6. 点击"提交提案"
7. 在MetaMask中确认交易

**预期结果**:
- 提案成功创建并记录在区块链上
- 显示创建成功的确认信息
- 提案显示在提案列表中
- 提案状态为"活跃"，可以接受投票

### TC-3.4: DAO治理 - 投票

**前置条件**:
- 用户已连接钱包
- 用户持有治理代币
- DAO中有活跃状态的提案

**测试步骤**:
1. 导航到活跃提案的详情页面
2. 选择投票选项（赞成、反对或弃权）
3. 输入投票权重（或使用最大可用权重）
4. 点击"投票"按钮
5. 在MetaMask中确认交易

**预期结果**:
- 投票成功提交到区块链
- 显示投票成功的确认信息
- 提案的投票结果和进度更新
- 用户无法对同一提案重复投票

### TC-3.5: DAO治理 - 执行提案

**前置条件**:
- 用户已连接钱包
- 有已通过但未执行的提案
- 用户有执行提案的权限

**测试步骤**:
1. 导航到已通过提案的详情页面
2. 点击"执行提案"按钮
3. 在确认对话框中检查执行详情
4. 点击"确认执行"
5. 在MetaMask中确认交易

**预期结果**:
- 提案执行命令成功提交到区块链
- 显示执行处理中的状态指示
- 执行确认后，提案状态更新为"已执行"
- 提案相关的变更生效

## 4. 身份与声誉系统测试

### TC-4.1: 身份系统 - 创建身份

**前置条件**:
- 用户已连接钱包
- 用户尚未创建身份

**测试步骤**:
1. 导航到"身份中心"页面
2. 点击"创建身份"按钮
3. 填写身份信息（用户名、简介、专业领域等）
4. 上传头像和封面图片
5. 点击"创建"按钮
6. 在MetaMask中确认交易

**预期结果**:
- 身份成功创建并记录在区块链上
- 显示创建成功的确认信息
- 身份信息显示在用户的个人资料页面
- 用户可以访问需要身份的功能

### TC-4.2: 身份系统 - 验证身份属性

**前置条件**:
- 用户已连接钱包
- 用户已创建身份

**测试步骤**:
1. 导航到"身份中心"页面
2. 点击"验证身份"按钮
3. 选择要验证的属性（如电子邮件）
4. 按照验证流程操作（如接收验证码并输入）
5. 完成验证流程

**预期结果**:
- 属性成功验证并记录在区块链上
- 显示验证成功的确认信息
- 验证标记显示在用户的个人资料中
- 用户的声誉分数相应增加

### TC-4.3: 声誉系统 - 查看声誉分数

**前置条件**:
- 用户已连接钱包
- 用户已创建身份

**测试步骤**:
1. 导航到"身份中心"页面
2. 查看声誉分数和详细分析

**预期结果**:
- 正确显示用户的总声誉分数
- 显示分数的详细构成（创作、交易、治理等类别）
- 显示声誉等级和下一等级所需分数
- 显示获取更多声誉分数的建议活动

### TC-4.4: 声誉系统 - 完成任务获取声誉

**前置条件**:
- 用户已连接钱包
- 用户已创建身份
- 平台有可完成的声誉任务

**测试步骤**:
1. 导航到"任务中心"页面
2. 选择一个未完成的任务
3. 完成任务要求的操作
4. 提交任务完成证明（如适用）

**预期结果**:
- 任务成功完成并验证
- 用户获得相应的声誉分数奖励
- 显示任务完成和奖励的确认信息
- 用户的声誉分数和等级相应更新

### TC-4.5: 成就系统 - 解锁成就

**前置条件**:
- 用户已连接钱包
- 用户已创建身份
- 用户接近满足某个成就的条件

**测试步骤**:
1. 完成满足成就条件的最后一步操作
2. 导航到"身份中心"的"成就"标签页

**预期结果**:
- 成就成功解锁
- 显示成就解锁的通知
- 成就徽章显示在用户的成就列表中
- 用户获得相应的声誉分数奖励

## 5. 跨模块集成测试

### TC-5.1: 集成测试 - NFT与声誉系统集成

**前置条件**:
- 用户已连接钱包
- 用户已创建身份
- 用户拥有声誉分数

**测试步骤**:
1. 创建一个新的NFT
2. 查看NFT的创作者信息
3. 查看用户的声誉分数变化

**预期结果**:
- NFT成功创建，显示创作者的身份信息和声誉等级
- 用户因创建NFT获得声誉分数奖励
- NFT的元数据中包含创作者的身份标识

### TC-5.2: 集成测试 - DAO与声誉系统集成

**前置条件**:
- 用户已连接钱包
- 用户已创建身份
- 用户拥有治理代币和声誉分数

**测试步骤**:
1. 参与DAO提案投票
2. 查看投票权重计算
3. 查看用户的声誉分数变化

**预期结果**:
- 投票权重正确计算，包含基础投票权和声誉加成
- 用户因参与治理获得声誉分数奖励
- 提案的投票记录中包含用户的身份标识

### TC-5.3: 集成测试 - NFT与DAO集成

**前置条件**:
- 用户已连接钱包
- 用户拥有NFT和治理代币

**测试步骤**:
1. 创建一个关于NFT市场参数的DAO提案
2. 使用NFT持有证明参与特殊投票
3. 提案通过后查看NFT市场参数变化

**预期结果**:
- 提案成功创建，与NFT市场参数相关
- NFT持有证明正确验证并提供额外投票权重
- 提案通过后，NFT市场参数按预期更新

### TC-5.4: 集成测试 - 钱包与身份系统集成

**前置条件**:
- 用户有多个钱包地址
- 用户在主钱包地址上已创建身份

**测试步骤**:
1. 使用主钱包登录并导航到"身份中心"
2. 添加辅助钱包地址到身份
3. 断开主钱包，连接辅助钱包
4. 查看身份信息

**预期结果**:
- 辅助钱包成功添加到用户身份
- 使用辅助钱包登录后，可以访问相同的身份信息
- 身份中心显示所有关联的钱包地址
- 用户可以使用任何关联钱包进行身份验证操作

## 6. 性能测试

### TC-6.1: 性能测试 - 页面加载时间

**测试步骤**:
1. 使用性能监控工具测量各主要页面的加载时间
   - 首页
   - NFT市场
   - DAO治理
   - 身份中心
2. 在不同网络条件下测试（高速、中速、低速）
3. 在不同设备上测试（高性能PC、低性能PC、移动设备）

**预期结果**:
- 首页加载时间 < 2秒（高速网络）
- 内部页面加载时间 < 3秒（高速网络）
- 骨架屏在内容加载前正确显示
- 关键内容优先加载，非关键内容懒加载

### TC-6.2: 性能测试 - NFT市场滚动性能

**测试步骤**:
1. 导航到NFT市场页面
2. 快速滚动浏览大量NFT
3. 测量帧率和内存使用情况

**预期结果**:
- 滚动时保持流畅（>30fps）
- 内存使用稳定，无明显泄漏
- 图片懒加载正常工作
- 无明显的UI卡顿或闪烁

### TC-6.3: 性能测试 - 区块链交互响应时间

**测试步骤**:
1. 执行各种区块链交互操作：
   - 连接钱包
   - 购买NFT
   - 创建提案
   - 投票
2. 测量从操作发起到UI响应的时间

**预期结果**:
- 钱包连接响应时间 < 2秒
- 交易提交响应时间 < 3秒
- 等待区块确认时显示适当的加载状态
- 长时间操作提供进度指示和取消选项

## 7. 安全测试

### TC-7.1: 安全测试 - 钱包连接安全

**测试步骤**:
1. 尝试在不同的浏览器环境中连接钱包
2. 测试在隐私模式下的钱包连接
3. 测试在断开连接后的数据处理

**预期结果**:
- 钱包连接请求明确显示所需权限
- 敏感数据不在本地存储中明文保存
- 断开连接后，敏感数据被正确清除
- 不同浏览器环境下连接安全一致

### TC-7.2: 安全测试 - 交易签名验证

**测试步骤**:
1. 发起各类交易（购买NFT、创建提案等）
2. 验证交易签名请求中的数据
3. 测试修改交易参数的情况

**预期结果**:
- 交易签名请求清晰显示所有关键参数
- 交易数据与UI显示一致
- 修改交易参数后，签名验证失败
- 提供交易安全提示和确认步骤

### TC-7.3: 安全测试 - 输入验证和XSS防护

**测试步骤**:
1. 在各输入字段中尝试输入特殊字符和脚本
2. 测试长文本输入和边界情况
3. 测试文件上传安全

**预期结果**:
- 所有用户输入经过适当验证和清理
- 特殊字符和脚本被正确处理，不执行
- 长文本输入被适当截断或处理
- 文件上传限制类型和大小，进行安全检查

## 8. 可访问性测试

### TC-8.1: 可访问性测试 - 键盘导航

**测试步骤**:
1. 使用Tab键在各页面间导航
2. 测试所有交互元素的键盘可访问性
3. 验证焦点指示器的可见性

**预期结果**:
- 所有交互元素可通过键盘访问
- 焦点顺序逻辑合理
- 焦点指示器清晰可见
- 模态框和下拉菜单可通过键盘操作

### TC-8.2: 可访问性测试 - 屏幕阅读器兼容性

**测试步骤**:
1. 使用屏幕阅读器（如NVDA或VoiceOver）浏览各页面
2. 测试动态内容更新的朗读
3. 验证表单和控件的标签

**预期结果**:
- 所有内容可被屏幕阅读器正确朗读
- 图像有适当的替代文本
- 表单控件有关联的标签
- 动态内容更新被适当通知

### TC-8.3: 可访问性测试 - 颜色对比度

**测试步骤**:
1. 使用对比度检查工具测试各UI元素
2. 在高对比度模式下测试
3. 测试不同颜色主题

**预期结果**:
- 文本对比度符合WCAG AA标准（4.5:1）
- 重要UI元素有足够的对比度
- 高对比度模式下内容清晰可见
- 不依赖颜色传达重要信息

## 9. 本地化测试

### TC-9.1: 本地化测试 - 多语言支持

**测试步骤**:
1. 切换到不同语言（中文、英文、日文等）
2. 验证UI元素的翻译
3. 测试特殊字符和非拉丁字符的显示

**预期结果**:
- UI元素正确翻译到选定语言
- 布局适应不同语言的文本长度
- 特殊字符和非拉丁字符正确显示
- 日期、时间和数字格式符合本地习惯

### TC-9.2: 本地化测试 - 货币显示

**测试步骤**:
1. 在不同区域设置下查看价格显示
2. 测试不同货币单位（ETH、MATIC、USD等）
3. 验证货币转换功能

**预期结果**:
- 价格显示符合本地货币格式
- 货币单位正确显示
- 货币转换计算准确
- 用户可以选择首选货币单位

## 10. 边缘情况测试

### TC-10.1: 边缘情况 - 网络中断恢复

**测试步骤**:
1. 在执行关键操作（如购买NFT）时断开网络连接
2. 等待几秒钟后恢复网络连接
3. 观察应用行为和错误处理

**预期结果**:
- 显示网络中断的错误消息
- 提供重试选项
- 恢复连接后，应用正常工作
- 未完成的交易状态正确处理

### TC-10.2: 边缘情况 - 低Gas余额

**测试步骤**:
1. 使用Gas余额不足的钱包尝试执行交易
2. 观察错误处理和用户提示

**预期结果**:
- 在交易前检测Gas余额不足
- 显示清晰的错误消息，说明原因
- 提供添加资金的指导
- 不允许用户提交必然失败的交易

### TC-10.3: 边缘情况 - 大量数据加载

**测试步骤**:
1. 测试加载大量NFT（>100个）的情况
2. 测试加载大量提案（>50个）的情况
3. 观察性能和分页功能

**预期结果**:
- 实现分页或无限滚动加载
- 大量数据加载不影响UI响应性
- 提供适当的加载指示器
- 允许用户筛选和搜索大量数据

---

## 测试报告模板

### 测试摘要
- 测试日期：[日期]
- 测试环境：[环境详情]
- 测试人员：[姓名]
- 测试范围：[测试的功能模块]

### 测试结果
- 通过测试用例数：[数量]
- 失败测试用例数：[数量]
- 阻塞测试用例数：[数量]
- 未执行测试用例数：[数量]

### 缺陷摘要
- 严重缺陷：[数量]
- 主要缺陷：[数量]
- 次要缺陷：[数量]
- 轻微缺陷：[数量]

### 详细测试结果
| 测试用例ID | 测试用例名称 | 状态 | 缺陷ID | 备注 |
|------------|--------------|------|--------|------|
| TC-1.1     | 钱包连接 - 基本功能 | 通过/失败 | DEF-001 | 备注信息 |
| ...        | ...          | ...  | ...    | ...  |

### 缺陷详情
| 缺陷ID | 严重程度 | 描述 | 重现步骤 | 预期结果 | 实际结果 |
|--------|----------|------|----------|----------|----------|
| DEF-001 | 严重/主要/次要/轻微 | 描述 | 步骤 | 预期 | 实际 |
| ...    | ...      | ...  | ...     | ...     | ...     |

### 建议和改进
- [建议1]
- [建议2]
- ...

### 结论
[总体测试结论和建议]

---

本测试用例文档应定期更新，以反映平台功能的变化和改进。测试团队应确保所有核心功能和关键用户流程都有相应的测试用例覆盖。
