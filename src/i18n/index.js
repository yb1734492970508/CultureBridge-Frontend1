// 国际化配置文件
export const locales = {
  zh: {
    // 通用
    appName: 'CultureBridge',
    loading: '加载中...',
    error: '错误',
    success: '成功',
    cancel: '取消',
    confirm: '确认',
    save: '保存',
    edit: '编辑',
    delete: '删除',
    search: '搜索',
    more: '更多',
    
    // 导航
    home: '首页',
    chat: '聊天',
    translate: '翻译',
    community: '社区',
    profile: '个人资料',
    settings: '设置',
    about: '关于',
    help: '帮助',
    
    // 首页
    welcome: '欢迎来到 CultureBridge',
    subtitle: '连接文化，桥接世界',
    heroTitle: '连接文化，桥接世界',
    heroSubtitle: '通过AI驱动的实时翻译和文化交流，打破语言障碍，建立全球友谊',
    startChatting: '开始聊天',
    joinCommunity: '加入社区',
    learnMore: '了解更多',
    
    // 功能特色
    features: '核心功能',
    featuresSubtitle: '通过先进的AI技术和直观的用户界面，让跨文化交流变得简单而有趣',
    realTimeTranslation: '实时翻译',
    realTimeTranslationDesc: '支持50+语言的即时翻译，让沟通无障碍',
    culturalExchange: '文化交流',
    culturalExchangeDesc: '与来自150+国家的用户分享文化体验',
    globalCommunity: '全球社区',
    globalCommunityDesc: '加入活跃的全球社区，建立国际友谊',
    
    // 统计数据
    activeUsers: '活跃用户',
    countries: '国家覆盖',
    languages: '支持语言',
    userSatisfaction: '用户满意度',
    
    // 认证
    login: '登录',
    register: '注册',
    logout: '退出登录',
    email: '邮箱',
    password: '密码',
    username: '用户名',
    firstName: '名字',
    lastName: '姓氏',
    forgotPassword: '忘记密码？',
    noAccount: '没有账号？',
    hasAccount: '已有账号？',
    createAccount: '创建账号',
    
    // 聊天
    chatWith: '与 {name} 聊天',
    typeMessage: '输入消息...',
    sendMessage: '发送消息',
    voiceMessage: '语音消息',
    translated: '翻译：',
    online: '在线',
    offline: '离线',
    lastSeen: '最后在线：{time}',
    
    // 翻译
    translateText: '翻译文本',
    sourceLanguage: '源语言',
    targetLanguage: '目标语言',
    detectLanguage: '自动检测',
    translateButton: '翻译',
    voiceTranslation: '语音翻译',
    translationHistory: '翻译历史',
    
    // 社区
    communityTitle: '全球文化社区',
    shareStory: '分享你的文化故事',
    createPost: '发布帖子',
    likePost: '点赞',
    commentPost: '评论',
    sharePost: '分享',
    viewPost: '查看',
    
    // 个人资料
    myProfile: '我的资料',
    editProfile: '编辑资料',
    profilePicture: '头像',
    bio: '个人简介',
    location: '位置',
    interests: '兴趣爱好',
    culturalBackground: '文化背景',
    languageSkills: '语言技能',
    
    // 设置
    notifications: '通知',
    privacy: '隐私',
    language: '语言',
    theme: '主题',
    account: '账户',
    security: '安全',
    
    // 错误消息
    networkError: '网络连接错误，请检查您的网络设置',
    serverError: '服务器错误，请稍后重试',
    invalidCredentials: '邮箱或密码错误',
    userNotFound: '用户不存在',
    emailExists: '邮箱已被注册',
    usernameExists: '用户名已被使用',
    
    // 成功消息
    loginSuccess: '登录成功',
    registerSuccess: '注册成功',
    profileUpdated: '资料更新成功',
    messagesSent: '消息发送成功',
    postCreated: '帖子发布成功',
    
    // 文化交流提示
    culturalTips: {
      greeting: '在不同文化中，问候方式各不相同。了解当地的问候习俗能让交流更加顺畅。',
      festivals: '询问其他国家的传统节日是开始文化交流的好方式！',
      food: '分享你家乡的特色美食，这是连接不同文化的美味桥梁。',
      traditions: '每个文化都有独特的传统，分享和了解这些传统能增进相互理解。',
      language: '学习几句对方的母语，即使是简单的"你好"和"谢谢"也能拉近距离。'
    },
    
    // 时间格式
    timeAgo: {
      justNow: '刚刚',
      minutesAgo: '{minutes} 分钟前',
      hoursAgo: '{hours} 小时前',
      daysAgo: '{days} 天前',
      weeksAgo: '{weeks} 周前',
      monthsAgo: '{months} 个月前'
    },
    
    // CTA 部分
    ctaTitle: '准备好开始你的文化之旅了吗？',
    ctaSubtitle: '加入数百万用户，体验无障碍的跨文化交流',
    getStarted: '立即开始',
    
    // 页脚
    footerDescription: '连接世界，分享文化，建立友谊。',
    product: '产品',
    company: '公司',
    support: '支持',
    contactUs: '联系我们',
    privacyPolicy: '隐私政策',
    termsOfService: '服务条款',
    helpCenter: '帮助中心',
    feedback: '反馈',
    allRightsReserved: '保留所有权利。'
  },
  
  en: {
    // Common
    appName: 'CultureBridge',
    loading: 'Loading...',
    error: 'Error',
    success: 'Success',
    cancel: 'Cancel',
    confirm: 'Confirm',
    save: 'Save',
    edit: 'Edit',
    delete: 'Delete',
    search: 'Search',
    more: 'More',
    
    // Navigation
    home: 'Home',
    chat: 'Chat',
    translate: 'Translate',
    community: 'Community',
    profile: 'Profile',
    settings: 'Settings',
    about: 'About',
    help: 'Help',
    
    // Home
    welcome: 'Welcome to CultureBridge',
    subtitle: 'Connect Cultures, Bridge Worlds',
    heroTitle: 'Connect Cultures, Bridge Worlds',
    heroSubtitle: 'Break language barriers and build global friendships through AI-powered real-time translation and cultural exchange',
    startChatting: 'Start Chatting',
    joinCommunity: 'Join Community',
    learnMore: 'Learn More',
    
    // Features
    features: 'Core Features',
    featuresSubtitle: 'Make cross-cultural communication simple and fun through advanced AI technology and intuitive user interface',
    realTimeTranslation: 'Real-time Translation',
    realTimeTranslationDesc: 'Instant translation for 50+ languages, making communication barrier-free',
    culturalExchange: 'Cultural Exchange',
    culturalExchangeDesc: 'Share cultural experiences with users from 150+ countries',
    globalCommunity: 'Global Community',
    globalCommunityDesc: 'Join an active global community and build international friendships',
    
    // Statistics
    activeUsers: 'Active Users',
    countries: 'Countries',
    languages: 'Languages',
    userSatisfaction: 'User Satisfaction',
    
    // Authentication
    login: 'Login',
    register: 'Register',
    logout: 'Logout',
    email: 'Email',
    password: 'Password',
    username: 'Username',
    firstName: 'First Name',
    lastName: 'Last Name',
    forgotPassword: 'Forgot Password?',
    noAccount: "Don't have an account?",
    hasAccount: 'Already have an account?',
    createAccount: 'Create Account',
    
    // Chat
    chatWith: 'Chat with {name}',
    typeMessage: 'Type a message...',
    sendMessage: 'Send Message',
    voiceMessage: 'Voice Message',
    translated: 'Translated:',
    online: 'Online',
    offline: 'Offline',
    lastSeen: 'Last seen: {time}',
    
    // Translation
    translateText: 'Translate Text',
    sourceLanguage: 'Source Language',
    targetLanguage: 'Target Language',
    detectLanguage: 'Auto Detect',
    translateButton: 'Translate',
    voiceTranslation: 'Voice Translation',
    translationHistory: 'Translation History',
    
    // Community
    communityTitle: 'Global Cultural Community',
    shareStory: 'Share Your Cultural Story',
    createPost: 'Create Post',
    likePost: 'Like',
    commentPost: 'Comment',
    sharePost: 'Share',
    viewPost: 'View',
    
    // Profile
    myProfile: 'My Profile',
    editProfile: 'Edit Profile',
    profilePicture: 'Profile Picture',
    bio: 'Bio',
    location: 'Location',
    interests: 'Interests',
    culturalBackground: 'Cultural Background',
    languageSkills: 'Language Skills',
    
    // Settings
    notifications: 'Notifications',
    privacy: 'Privacy',
    language: 'Language',
    theme: 'Theme',
    account: 'Account',
    security: 'Security',
    
    // Error Messages
    networkError: 'Network connection error, please check your network settings',
    serverError: 'Server error, please try again later',
    invalidCredentials: 'Invalid email or password',
    userNotFound: 'User not found',
    emailExists: 'Email already registered',
    usernameExists: 'Username already taken',
    
    // Success Messages
    loginSuccess: 'Login successful',
    registerSuccess: 'Registration successful',
    profileUpdated: 'Profile updated successfully',
    messagesSent: 'Message sent successfully',
    postCreated: 'Post created successfully',
    
    // Cultural Tips
    culturalTips: {
      greeting: 'Greeting customs vary across cultures. Understanding local greeting practices makes communication smoother.',
      festivals: 'Asking about traditional festivals in other countries is a great way to start cultural exchange!',
      food: 'Share your hometown specialties - food is a delicious bridge connecting different cultures.',
      traditions: 'Every culture has unique traditions. Sharing and learning about these traditions enhances mutual understanding.',
      language: 'Learn a few words in their native language. Even simple "hello" and "thank you" can bring people closer.'
    },
    
    // Time Format
    timeAgo: {
      justNow: 'Just now',
      minutesAgo: '{minutes} minutes ago',
      hoursAgo: '{hours} hours ago',
      daysAgo: '{days} days ago',
      weeksAgo: '{weeks} weeks ago',
      monthsAgo: '{months} months ago'
    },
    
    // CTA Section
    ctaTitle: 'Ready to Start Your Cultural Journey?',
    ctaSubtitle: 'Join millions of users and experience barrier-free cross-cultural communication',
    getStarted: 'Get Started Now',
    
    // Footer
    footerDescription: 'Connecting the world, sharing cultures, building friendships.',
    product: 'Product',
    company: 'Company',
    support: 'Support',
    contactUs: 'Contact Us',
    privacyPolicy: 'Privacy Policy',
    termsOfService: 'Terms of Service',
    helpCenter: 'Help Center',
    feedback: 'Feedback',
    allRightsReserved: 'All rights reserved.'
  },
  
  es: {
    // Español - Spanish
    appName: 'CultureBridge',
    loading: 'Cargando...',
    error: 'Error',
    success: 'Éxito',
    cancel: 'Cancelar',
    confirm: 'Confirmar',
    save: 'Guardar',
    edit: 'Editar',
    delete: 'Eliminar',
    search: 'Buscar',
    more: 'Más',
    
    home: 'Inicio',
    chat: 'Chat',
    translate: 'Traducir',
    community: 'Comunidad',
    profile: 'Perfil',
    
    welcome: 'Bienvenido a CultureBridge',
    subtitle: 'Conecta Culturas, Une Mundos',
    heroTitle: 'Conecta Culturas, Une Mundos',
    heroSubtitle: 'Rompe las barreras del idioma y construye amistades globales a través de traducción en tiempo real impulsada por IA e intercambio cultural',
    startChatting: 'Comenzar a Chatear',
    joinCommunity: 'Unirse a la Comunidad',
    
    realTimeTranslation: 'Traducción en Tiempo Real',
    culturalExchange: 'Intercambio Cultural',
    globalCommunity: 'Comunidad Global',
    
    login: 'Iniciar Sesión',
    register: 'Registrarse',
    email: 'Correo Electrónico',
    password: 'Contraseña',
    username: 'Nombre de Usuario'
  },
  
  fr: {
    // Français - French
    appName: 'CultureBridge',
    loading: 'Chargement...',
    error: 'Erreur',
    success: 'Succès',
    cancel: 'Annuler',
    confirm: 'Confirmer',
    save: 'Sauvegarder',
    edit: 'Modifier',
    delete: 'Supprimer',
    search: 'Rechercher',
    more: 'Plus',
    
    home: 'Accueil',
    chat: 'Chat',
    translate: 'Traduire',
    community: 'Communauté',
    profile: 'Profil',
    
    welcome: 'Bienvenue sur CultureBridge',
    subtitle: 'Connecter les Cultures, Relier les Mondes',
    heroTitle: 'Connecter les Cultures, Relier les Mondes',
    heroSubtitle: 'Brisez les barrières linguistiques et construisez des amitiés mondiales grâce à la traduction en temps réel alimentée par IA et l\'échange culturel',
    startChatting: 'Commencer à Chatter',
    joinCommunity: 'Rejoindre la Communauté',
    
    realTimeTranslation: 'Traduction en Temps Réel',
    culturalExchange: 'Échange Culturel',
    globalCommunity: 'Communauté Mondiale',
    
    login: 'Se Connecter',
    register: 'S\'inscrire',
    email: 'Email',
    password: 'Mot de Passe',
    username: 'Nom d\'Utilisateur'
  },
  
  ar: {
    // العربية - Arabic
    appName: 'CultureBridge',
    loading: 'جاري التحميل...',
    error: 'خطأ',
    success: 'نجح',
    cancel: 'إلغاء',
    confirm: 'تأكيد',
    save: 'حفظ',
    edit: 'تعديل',
    delete: 'حذف',
    search: 'بحث',
    more: 'المزيد',
    
    home: 'الرئيسية',
    chat: 'المحادثة',
    translate: 'ترجمة',
    community: 'المجتمع',
    profile: 'الملف الشخصي',
    
    welcome: 'مرحباً بك في CultureBridge',
    subtitle: 'اربط الثقافات، اجسر العوالم',
    heroTitle: 'اربط الثقافات، اجسر العوالم',
    heroSubtitle: 'اكسر حواجز اللغة وابن صداقات عالمية من خلال الترجمة الفورية المدعومة بالذكاء الاصطناعي والتبادل الثقافي',
    startChatting: 'ابدأ المحادثة',
    joinCommunity: 'انضم للمجتمع',
    
    realTimeTranslation: 'الترجمة الفورية',
    culturalExchange: 'التبادل الثقافي',
    globalCommunity: 'المجتمع العالمي',
    
    login: 'تسجيل الدخول',
    register: 'إنشاء حساب',
    email: 'البريد الإلكتروني',
    password: 'كلمة المرور',
    username: 'اسم المستخدم'
  },
  
  ja: {
    // 日本語 - Japanese
    appName: 'CultureBridge',
    loading: '読み込み中...',
    error: 'エラー',
    success: '成功',
    cancel: 'キャンセル',
    confirm: '確認',
    save: '保存',
    edit: '編集',
    delete: '削除',
    search: '検索',
    more: 'もっと',
    
    home: 'ホーム',
    chat: 'チャット',
    translate: '翻訳',
    community: 'コミュニティ',
    profile: 'プロフィール',
    
    welcome: 'CultureBridgeへようこそ',
    subtitle: '文化をつなぎ、世界を架橋する',
    heroTitle: '文化をつなぎ、世界を架橋する',
    heroSubtitle: 'AI搭載のリアルタイム翻訳と文化交流を通じて言語の壁を破り、グローバルな友情を築きましょう',
    startChatting: 'チャットを始める',
    joinCommunity: 'コミュニティに参加',
    
    realTimeTranslation: 'リアルタイム翻訳',
    culturalExchange: '文化交流',
    globalCommunity: 'グローバルコミュニティ',
    
    login: 'ログイン',
    register: '登録',
    email: 'メールアドレス',
    password: 'パスワード',
    username: 'ユーザー名'
  }
};

// 语言检测和设置
export const detectUserLanguage = () => {
  // 检查本地存储
  const savedLanguage = localStorage.getItem('culturebridge_language');
  if (savedLanguage && locales[savedLanguage]) {
    return savedLanguage;
  }
  
  // 检查浏览器语言
  const browserLanguage = navigator.language || navigator.userLanguage;
  
  // 语言映射
  const languageMap = {
    'zh': 'zh',
    'zh-CN': 'zh',
    'zh-TW': 'zh',
    'zh-HK': 'zh',
    'en': 'en',
    'en-US': 'en',
    'en-GB': 'en',
    'es': 'es',
    'es-ES': 'es',
    'es-MX': 'es',
    'fr': 'fr',
    'fr-FR': 'fr',
    'fr-CA': 'fr',
    'ar': 'ar',
    'ar-SA': 'ar',
    'ar-EG': 'ar',
    'ja': 'ja',
    'ja-JP': 'ja'
  };
  
  // 检查完整语言代码
  if (languageMap[browserLanguage]) {
    return languageMap[browserLanguage];
  }
  
  // 检查语言前缀
  const languagePrefix = browserLanguage.split('-')[0];
  if (languageMap[languagePrefix]) {
    return languageMap[languagePrefix];
  }
  
  // 默认返回中文
  return 'zh';
};

// 获取国家对应的默认语言
export const getCountryLanguage = (country) => {
  const countryLanguageMap = {
    'CN': 'zh', // 中国
    'TW': 'zh', // 台湾
    'HK': 'zh', // 香港
    'MO': 'zh', // 澳门
    'SG': 'zh', // 新加坡（多语言，但有中文）
    'US': 'en', // 美国
    'GB': 'en', // 英国
    'CA': 'en', // 加拿大（多语言）
    'AU': 'en', // 澳大利亚
    'NZ': 'en', // 新西兰
    'IE': 'en', // 爱尔兰
    'ZA': 'en', // 南非（多语言）
    'ES': 'es', // 西班牙
    'MX': 'es', // 墨西哥
    'AR': 'es', // 阿根廷
    'CO': 'es', // 哥伦比亚
    'PE': 'es', // 秘鲁
    'VE': 'es', // 委内瑞拉
    'CL': 'es', // 智利
    'EC': 'es', // 厄瓜多尔
    'GT': 'es', // 危地马拉
    'CU': 'es', // 古巴
    'BO': 'es', // 玻利维亚
    'DO': 'es', // 多米尼加
    'HN': 'es', // 洪都拉斯
    'PY': 'es', // 巴拉圭
    'SV': 'es', // 萨尔瓦多
    'NI': 'es', // 尼加拉瓜
    'CR': 'es', // 哥斯达黎加
    'PA': 'es', // 巴拿马
    'UY': 'es', // 乌拉圭
    'FR': 'fr', // 法国
    'BE': 'fr', // 比利时（多语言）
    'CH': 'fr', // 瑞士（多语言）
    'LU': 'fr', // 卢森堡（多语言）
    'MC': 'fr', // 摩纳哥
    'SA': 'ar', // 沙特阿拉伯
    'AE': 'ar', // 阿联酋
    'EG': 'ar', // 埃及
    'JO': 'ar', // 约旦
    'LB': 'ar', // 黎巴嫩
    'SY': 'ar', // 叙利亚
    'IQ': 'ar', // 伊拉克
    'KW': 'ar', // 科威特
    'QA': 'ar', // 卡塔尔
    'BH': 'ar', // 巴林
    'OM': 'ar', // 阿曼
    'YE': 'ar', // 也门
    'MA': 'ar', // 摩洛哥
    'TN': 'ar', // 突尼斯
    'DZ': 'ar', // 阿尔及利亚
    'LY': 'ar', // 利比亚
    'SD': 'ar', // 苏丹
    'JP': 'ja', // 日本
  };
  
  return countryLanguageMap[country] || 'en';
};

// 文本插值函数
export const interpolate = (text, params = {}) => {
  return text.replace(/\{(\w+)\}/g, (match, key) => {
    return params[key] !== undefined ? params[key] : match;
  });
};

// 获取翻译文本
export const getTranslation = (key, language = 'zh', params = {}) => {
  const keys = key.split('.');
  let value = locales[language];
  
  for (const k of keys) {
    if (value && typeof value === 'object') {
      value = value[k];
    } else {
      value = undefined;
      break;
    }
  }
  
  // 如果找不到翻译，尝试使用英文
  if (value === undefined && language !== 'en') {
    value = getTranslation(key, 'en', params);
  }
  
  // 如果还是找不到，返回 key
  if (value === undefined) {
    return key;
  }
  
  // 如果是字符串，进行插值
  if (typeof value === 'string') {
    return interpolate(value, params);
  }
  
  return value;
};

// 支持的语言列表
export const supportedLanguages = [
  { code: 'zh', name: '中文', nativeName: '中文' },
  { code: 'en', name: 'English', nativeName: 'English' },
  { code: 'es', name: 'Spanish', nativeName: 'Español' },
  { code: 'fr', name: 'French', nativeName: 'Français' },
  { code: 'ar', name: 'Arabic', nativeName: 'العربية' },
  { code: 'ja', name: 'Japanese', nativeName: '日本語' }
];

// 获取语言的本地化名称
export const getLanguageName = (code, displayLanguage = 'en') => {
  const language = supportedLanguages.find(lang => lang.code === code);
  if (!language) return code;
  
  if (displayLanguage === 'native') {
    return language.nativeName;
  }
  
  const names = {
    zh: {
      zh: '中文',
      en: '英语',
      es: '西班牙语',
      fr: '法语',
      ar: '阿拉伯语',
      ja: '日语'
    },
    en: {
      zh: 'Chinese',
      en: 'English',
      es: 'Spanish',
      fr: 'French',
      ar: 'Arabic',
      ja: 'Japanese'
    }
  };
  
  return names[displayLanguage]?.[code] || language.name;
};

// RTL 语言检查
export const isRTLLanguage = (language) => {
  return ['ar'].includes(language);
};

// 数字格式化
export const formatNumber = (number, language = 'en') => {
  try {
    return new Intl.NumberFormat(language === 'zh' ? 'zh-CN' : language).format(number);
  } catch (error) {
    return number.toString();
  }
};

// 日期格式化
export const formatDate = (date, language = 'en', options = {}) => {
  try {
    const locale = language === 'zh' ? 'zh-CN' : language;
    return new Intl.DateTimeFormat(locale, {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      ...options
    }).format(new Date(date));
  } catch (error) {
    return new Date(date).toLocaleDateString();
  }
};

// 相对时间格式化
export const formatRelativeTime = (date, language = 'zh') => {
  const now = new Date();
  const targetDate = new Date(date);
  const diffInSeconds = Math.floor((now - targetDate) / 1000);
  
  if (diffInSeconds < 60) {
    return getTranslation('timeAgo.justNow', language);
  }
  
  const diffInMinutes = Math.floor(diffInSeconds / 60);
  if (diffInMinutes < 60) {
    return getTranslation('timeAgo.minutesAgo', language, { minutes: diffInMinutes });
  }
  
  const diffInHours = Math.floor(diffInMinutes / 60);
  if (diffInHours < 24) {
    return getTranslation('timeAgo.hoursAgo', language, { hours: diffInHours });
  }
  
  const diffInDays = Math.floor(diffInHours / 24);
  if (diffInDays < 7) {
    return getTranslation('timeAgo.daysAgo', language, { days: diffInDays });
  }
  
  const diffInWeeks = Math.floor(diffInDays / 7);
  if (diffInWeeks < 4) {
    return getTranslation('timeAgo.weeksAgo', language, { weeks: diffInWeeks });
  }
  
  const diffInMonths = Math.floor(diffInDays / 30);
  return getTranslation('timeAgo.monthsAgo', language, { months: diffInMonths });
};

export default {
  locales,
  detectUserLanguage,
  getCountryLanguage,
  getTranslation,
  supportedLanguages,
  getLanguageName,
  isRTLLanguage,
  formatNumber,
  formatDate,
  formatRelativeTime,
  interpolate
};

